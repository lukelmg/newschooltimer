<html>

<body onload="read();">
  Timer
  <br />
  <p id="output"></p>
  <p id="time"></p>
  <p id="time0"></p>
    <p id="time1"></p>
      <p id="time2"></p>
        <p id="time3"></p>
          <p id="time4"></p>
            <p id="time5"></p>
              <p id="time6"></p>

              <form id="selectorDiv"></form>
</body>

</html>

<style>
  body {
    font-size: 2vh;
  }
</style>


<script>
  var numberOfSchedules;
  var scheduleNames;
  var scheduleAbbreviations;
  var periodsPerSchedule;
  var periodTimes;

var periodScheduleArray = [];
var nameArray = [];
var timeArray = [];

var scheduleSplit = [];


var scheduleAbbreviationsArray = [];
  function read() {

    var url_string = window.location.href;
    var url = new URL(url_string);

    numberOfSchedules = url.searchParams.get("nums");
    scheduleNames = url.searchParams.get("names");
    periodTimes = url.searchParams.get("times");
    scheduleAbbreviations = url.searchParams.get("abbs");
    periodsPerSchedule = url.searchParams.get("pers");

    document.getElementById("output").innerHTML = "# of Schedules:" + numberOfSchedules + "<br> Schedule Names: " + scheduleNames + "<br> Schedule Times: " + periodTimes +
      "<br> Schedule Abbrevaitions: " + scheduleAbbreviations + "<br> Periods per schedule: " + periodsPerSchedule;

      scheduleAbbreviationsArray = scheduleAbbreviations.split(",");

    periodScheduleArray = periodsPerSchedule.split(",");

    nameArray = scheduleNames.split(",");

    timeArray = periodTimes.split(",");


//Made radio buttons
    var container = document.getElementById("selectorDiv");

    while (container.hasChildNodes()) {
      container.removeChild(container.lastChild);
    }


    for (var i = 0; i <  (numberOfSchedules); i++) {
      var rad = document.createElement("input");
      if (i == 0) {
        rad.checked = true;
      }
      rad.type = "radio";
      rad.name = "hello";
      var para = document.createElement("span");
      var node = document.createTextNode(scheduleAbbreviationsArray[i]);
      para.appendChild(node);
      container.appendChild(para);
      container.appendChild(rad);
    }
// end of make radios buttons



// make time and name in chunks
              var k = 0;
              var p,j,timeSplitArray,nameSplitArray,chunk;
                for (p=0,j=timeArray.length; p<j; p+=chunk) {

                    var prtest = parseInt(periodScheduleArray[k]);
                    p,j,timeSplitArray,nameSplitArray,chunk = prtest;
                    timeSplitArray = timeArray.slice(p,p+chunk);
                    nameSplitArray = nameArray.slice(p,p+chunk);

                    scheduleSplit[k] = timeSplitArray + " ||| " + nameSplitArray + " /// ";

                    k++;
                }

                alert(scheduleSplit);



  }

var hourTest = ["17", "18", "19", "20", "21", "22", "23"];
var minTest = ["0", "10", "20", "30", "40", "50", "59"];


  (function() {

  function pad(num) {
    return ("0" + parseInt(num)).substr(-2);
  }

  function tick() {
    for (var i = 0; i < periodScheduleArray[0]; i++) {
      var start = new Date;
      start.setHours(hourTest[i], minTest[i], 0);
      var now = new Date;
      if (now > start) { // too late, go to tomorrow
        start.setDate(start.getDate() + 1);
      }
      var remain = ((start - now) / 1000);
      var hh = pad((remain / 60 / 60) % 60);
      var mm = pad((remain / 60) % 60);
      var ss = pad(remain % 60);
      document.getElementById('time' + i).innerHTML =  hh + ":" + mm + ":" + ss;
    }
    setTimeout(tick, 500);
  }

  document.addEventListener('DOMContentLoaded', tick);
})();
</script>
